const searchForm=document.getElementById("searchForm"),searchFormMobile=document.getElementById("searchFormMobile"),searchInput=document.getElementById("search-input"),mobileSearchInput=document.getElementById("mobile-search-input"),searchBtn=document.querySelector(".top-bar__search-btn"),mobileSearchBtn=document.querySelector(".mobile__search-btn"),mobileSearchClose=document.querySelector(".mobile__search-box__close"),searchClose=document.querySelector(".search-box__close"),cartButton=document.querySelectorAll(".top-bar__cart-button"),cartWrapper=document.querySelector(".top-bar__cart"),cartOverlay=document.querySelector(".cart-overlay"),priceOverlay=document.querySelector(".overlay"),priceModal=document.querySelector(".modal"),priceLinks=document.querySelectorAll(".price-link"),priceModalClose=document.querySelectorAll(".close-modal"),priceFormInputs=document.querySelectorAll(".price-form__input"),safeLinks=document.querySelectorAll(".safe-link"),safeOverlay=document.querySelector(".overlay"),safeModal=document.querySelector(".modal"),safeModalClose=document.querySelectorAll(".close-modal"),safeFormInputs=document.querySelectorAll(".safe-form__input"),tileViewMode=document.getElementById("actionTileViewMode"),listViewMode=document.getElementById("actionListViewMode"),tileViewModeBtn=document.querySelectorAll(".tile-view-btn"),listViewModeBtn=document.querySelectorAll(".list-view-btn"),headerLinks=document.querySelectorAll(".site-header__nav-link"),visitedLinks=document.querySelectorAll(".active-link"),catalogTileViewMode=document.getElementById("catalogTileView"),catalogListViewMode=document.getElementById("catalogListViewMode"),catalogTileViewModeBtn=document.getElementsByClassName("catalog-tile-view-btn")[0],catalogListViewModeBtn=document.getElementsByClassName("catalog-list-view-btn")[0],delivery=document.querySelector(".collapse-one"),instruction=document.querySelector(".instruction"),certificates=document.querySelector(".certificates"),warranty=document.querySelector(".warranty"),deliveryBtn=document.querySelector(".delivery-btn"),warrantyBtn=document.querySelector(".warranty-btn"),certificatesBtn=document.querySelector(".certificates-btn"),instructionBtn=document.querySelector(".instruction-btn"),about=document.querySelector(".information-about"),mobileCart=document.querySelector(".mobile-cart"),mobileCartBtn=document.querySelector(".mobile-cart-button"),mobileMenuBtn=document.querySelector(".top-bar__hamburger-menu"),mobileMenu=document.querySelector(".mobile-menu-modal"),mobileMenuOverlay=document.querySelector(".mobile-menu-overlay"),mobileMenuClose=document.querySelector(".drawer-menu__close"),infoBtn=document.getElementsByClassName("info-btn")[0],differenceBtn=document.getElementsByClassName("difference-btn")[0],infoContent=document.getElementsByClassName("info-content")[0],differenceContent=document.getElementsByClassName("difference-content")[0],topBarPhoneNumber=document.querySelector(".top-bar__phone-number-mobile"),recieveMethodCard=document.querySelectorAll(".recieve-method__card"),reciveMethodWrapper=document.querySelector(".receive-wrapper"),additionalCommentText=document.querySelector(".addition-comment-box"),additionalCommentClean=document.querySelector(".addition-comment-close");class TabContentAccordion{constructor(e,t){this.allButtons=e,this.allSections=t}toggleButtonIcons(e){e.children[1].className.includes("open active")?(e.children[1].className="open",e.children[2].className="close active",e.classList.add("information-button-active"),this.allButtons.forEach(t=>{t!==e&&(t.children[1].className="open active",t.children[2].className="close",t.classList.remove("information-button-active"))})):(e.children[1].className="open active",e.children[2].className="close",e.classList.remove("information-button-active"))}toggleSections(e){e.classList.toggle("d-block"),this.allSections.forEach(t=>{t!==e&&t.classList.remove("d-block")})}}class ModalDialog{constructor(e,t,o){this.overlay=e,this.modal=t,this.inputs=o}showModal(){console.log(this.inputs),this.inputs[0].focus(),this.overlay.classList.add(this.overlay.classList[0]+"_active"),this.modal.classList.add(this.modal.classList[0]+"_active"),document.getElementsByTagName("html")[0].style.overflow="hidden"}closeModal(){this.overlay.classList.remove(this.overlay.classList[0]+"_active"),this.modal.classList.remove(this.modal.classList[0]+"_active"),document.getElementsByTagName("html")[0].style.overflow="auto"}modalFormInputState(){this.inputs.forEach(e=>{e.addEventListener("input",t=>{t.target.value.length>0?e.classList.add(e.classList[0]+"_poluted"):e.classList.remove(e.classList[0]+"_poluted")})})}}let priceModalDialog=new ModalDialog(priceOverlay,priceModal,priceFormInputs);priceLinks.forEach(e=>{e.addEventListener("click",()=>{priceModalDialog.showModal()})}),priceModalClose.forEach(e=>{e.addEventListener("click",()=>{priceModalDialog.closeModal()})}),priceFormInputs.forEach(e=>{e.addEventListener("click",()=>{priceModalDialog.modalFormInputState()})});let safeModalDialog=new ModalDialog(safeOverlay,safeModal,safeFormInputs);safeLinks.forEach(e=>{e.addEventListener("click",()=>{safeModalDialog.showModal()})}),safeModalClose.forEach(e=>{e.addEventListener("click",()=>{safeModalDialog.closeModal()})}),safeFormInputs.forEach(e=>{e.addEventListener("click",()=>{safeModalDialog.modalFormInputState()})});let prevScrollpos=window.pageYOffset;function switchViewMode(e,t,o,i){e.classList.contains("hidden")&&e.classList.remove("hidden"),o.classList.add("hidden"),i.classList.remove("active"),t.classList.add("active")}window.onscroll=function(){let e=window.pageYOffset;prevScrollpos>e?(document.getElementById("navbar").style.top="0",document.getElementById("mobileNavbar").style.bottom="-100px"):(document.getElementById("navbar").style.top="-150px",document.getElementById("mobileNavbar").style.bottom="0"),prevScrollpos=e},mobileSearchBtn&&mobileSearchBtn.addEventListener("click",()=>{searchFormMobile.classList.add("mobile__search-box_show"),mobileSearchInput.focus(),mobileSearchBtn.classList.add("black"),mobileSearchBtn.children[0].children[0].attributes[1].value="#26323F"}),mobileSearchClose&&mobileSearchClose.addEventListener("click",()=>{searchFormMobile.classList.remove("mobile__search-box_show"),mobileSearchBtn.classList.remove("black"),mobileSearchBtn.children[0].children[0].attributes[1].value="#B6C0CB"}),searchBtn.addEventListener("click",()=>{searchForm.classList.add("top-bar__search-box_show"),searchInput.focus()}),searchClose.addEventListener("click",()=>{searchForm.classList.remove("top-bar__search-box_show")}),cartButton&&cartButton.forEach(e=>{e.addEventListener("click",()=>{cartWrapper.classList.toggle("d-block"),cartOverlay.classList.toggle("show-cart-overlay"),searchForm.classList.remove("top-bar__search-box_show"),cartOverlay.classList.remove("overlay")})}),cartOverlay.addEventListener("click",()=>{cartWrapper.classList.remove("d-block"),cartOverlay.classList.remove("show-cart-overlay"),priceModal.classList.remove("price-form__visible")}),tileViewModeBtn&&tileViewModeBtn.forEach((e,t)=>{e.addEventListener("click",()=>{switchViewMode(tileViewMode,e,listViewMode,listViewModeBtn[t])})}),listViewModeBtn&&listViewModeBtn.forEach((e,t)=>{e.addEventListener("click",()=>{switchViewMode(listViewMode,e,tileViewMode,tileViewModeBtn[t])})}),catalogTileViewModeBtn&&catalogTileViewModeBtn.addEventListener("click",()=>{switchViewMode(catalogTileViewMode,catalogTileViewModeBtn,catalogListViewMode,catalogListViewModeBtn)}),catalogListViewModeBtn&&catalogListViewModeBtn.addEventListener("click",()=>{switchViewMode(catalogListViewMode,catalogListViewModeBtn,catalogTileViewMode,catalogTileViewModeBtn)});let allInfoPageBtns=[deliveryBtn,instructionBtn,certificatesBtn,warrantyBtn],allInfoPageSections=[delivery,instruction,certificates,warranty,about],informationPageTabs=new TabContentAccordion(allInfoPageBtns,allInfoPageSections);deliveryBtn&&deliveryBtn.addEventListener("click",()=>{informationPageTabs.toggleSections(delivery),informationPageTabs.toggleButtonIcons(deliveryBtn)}),warrantyBtn&&warrantyBtn.addEventListener("click",()=>{informationPageTabs.toggleSections(warranty),informationPageTabs.toggleButtonIcons(warrantyBtn)}),certificatesBtn&&certificatesBtn.addEventListener("click",()=>{informationPageTabs.toggleSections(certificates),informationPageTabs.toggleButtonIcons(certificatesBtn)}),instructionBtn&&instructionBtn.addEventListener("click",()=>{informationPageTabs.toggleSections(instruction),informationPageTabs.toggleButtonIcons(instructionBtn)});let allComparisionPageBtns=[infoBtn,differenceBtn],allComparisionPageSections=[infoContent,differenceContent],comparisionPageTabs=new TabContentAccordion(allComparisionPageBtns,allComparisionPageSections);infoBtn&&infoBtn.addEventListener("click",()=>{comparisionPageTabs.toggleButtonIcons(infoBtn),comparisionPageTabs.toggleSections(infoContent)}),differenceBtn&&differenceBtn.addEventListener("click",()=>{comparisionPageTabs.toggleButtonIcons(differenceBtn),comparisionPageTabs.toggleSections(differenceContent)}),mobileMenuBtn.addEventListener("click",()=>{mobileMenu.classList.toggle("mobile-menu-modal_active"),mobileMenuOverlay.classList.toggle("mobile-menu-overlay_active")}),mobileMenuClose.addEventListener("click",()=>{mobileMenu.classList.remove("mobile-menu-modal_active"),mobileMenuOverlay.classList.remove("mobile-menu-overlay_active")}),mobileCartBtn&&mobileCartBtn.addEventListener("click",()=>{cartWrapper.classList.toggle("cart-wrapper_visible")});let comparisionResetList=document.querySelector(".comparision__reset-list"),comparisionCompareBtn=document.querySelector(".comparision__compare"),comparisionProcessSection=document.querySelector(".comparision-process"),comparisionDefaultSection=document.querySelector(".comparision-default-state");comparisionResetList&&comparisionResetList.addEventListener("click",()=>{comparisionResetList.classList.add("d-none"),comparisionCompareBtn.classList.remove("d-none"),comparisionProcessSection.classList.add("d-none"),comparisionDefaultSection.classList.remove("d-none")}),comparisionCompareBtn&&comparisionCompareBtn.addEventListener("click",()=>{comparisionResetList.classList.remove("d-none"),comparisionCompareBtn.classList.add("d-none"),comparisionProcessSection.classList.remove("d-none"),comparisionDefaultSection.classList.add("d-none")}),topBarPhoneNumber.addEventListener("click",()=>{topBarPhoneNumber.textContent="8 (812) 565 03 59",topBarPhoneNumber.classList.add("black")});let select,selElmnt,selectedEl,hiddenEl,c,sortingBtns=document.querySelectorAll(".sorting-button"),filterBtns=document.querySelectorAll(".filter-button"),sortingBottomSheet=document.getElementById("sortingBottomSheet"),productFilter=document.getElementById("mobileProductFilter"),closeMobileFilter=document.getElementById("closeMobileFilter"),topBarFilterState=document.querySelector(".top-bar__mobile-filter");sortingBtns.forEach(e=>{e.addEventListener("click",()=>{sortingBottomSheet.classList.toggle("sorting-bottomsheet_active")})}),filterBtns.forEach(e=>{e.addEventListener("click",()=>{productFilter.classList.add("d-block"),topBarFilterState.classList.add("d-block")})}),closeMobileFilter&&closeMobileFilter.addEventListener("click",()=>{productFilter.classList.remove("d-block"),topBarFilterState.classList.remove("d-block")}),recieveMethodCard&&recieveMethodCard.forEach(e=>{e.addEventListener("click",()=>{recieveMethodCard.forEach(t=>{t!==e&&t.classList.remove("recieve-method__card_active")}),e===recieveMethodCard[1]?(reciveMethodWrapper.classList.add("receive-wrapper__optional_active"),document.querySelector(".optional-payment-form-wrapper").classList="optional-payment-form-wrapper_active",document.querySelector(".payment-form-wrapper_active").classList="payment-form-wrapper",document.querySelector(".optional-assembly").classList="row optional-assembly_active"):(reciveMethodWrapper.classList.remove("receive-wrapper__optional_active"),document.querySelector(".optional-payment-form-wrapper_active").classList="optional-payment-form-wrapper",document.querySelector(".payment-form-wrapper").classList="payment-form-wrapper_active",document.querySelector(".optional-assembly_active").classList="row optional-assembly"),e.classList.add("recieve-method__card_active")})}),additionalCommentClean&&additionalCommentClean.addEventListener("click",()=>{additionalCommentText.value=""}),select=document.getElementsByClassName("custom-select");for(let e=0;e<select.length;e++){selElmnt=select[e].getElementsByTagName("select")[0],selectedEl=document.createElement("DIV"),selectedEl.setAttribute("class","select-selected"),selectedEl.innerHTML=selElmnt.options[selElmnt.selectedIndex].innerHTML,select[e].appendChild(selectedEl),hiddenEl=document.createElement("DIV"),hiddenEl.setAttribute("class","select-items select-hide");for(let e=1;e<selElmnt.length;e++)c=document.createElement("DIV"),c.innerHTML=selElmnt.options[e].innerHTML,c.addEventListener("click",(function(){let e,t,o,i,l,a,c;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],a=i.length,l=this.parentNode.previousSibling,t=0;t<a;t++)if(i.options[t].innerHTML==this.innerHTML){for(i.selectedIndex=t,l.innerHTML=this.innerHTML,e=this.parentNode.getElementsByClassName("same-as-selected"),c=e.length,o=0;o<c;o++)e[o].removeAttribute("class");this.setAttribute("class","same-as-selected");break}l.click()})),hiddenEl.appendChild(c);select[e].appendChild(hiddenEl),selectedEl.addEventListener("click",(function(t){t.stopPropagation(),closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),select[e].classList.toggle("select-arrow-active")}))}function closeAllSelect(e){let t,o,i,l,a,c=[];for(t=document.getElementsByClassName("select-items"),o=document.getElementsByClassName("custom-select"),l=t.length,a=o.length,i=0;i<a;i++)e==o[i]?c.push(i):o[i].classList.remove("select-arrow-active");for(i=0;i<l;i++)c.indexOf(i)&&t[i].classList.add("select-hide")}if(document.addEventListener("click",closeAllSelect),"/bucket/checkout/checkout.html"===window.location.pathname){let e=document.querySelector(".buyer-form-wrapper"),t=document.querySelector(".buyer-form__individual"),o=document.querySelector(".buyer-form__legal-entity"),i=document.querySelector(".buyer-form__type-select"),l=i.querySelector(".select-selected"),a=i.querySelector(".select-items");i.addEventListener("click",()=>{l.textContent!==a.firstChild.textContent?(t.classList.add("d-none"),o.classList="buyer-form__legal-entity_active",e.classList.add("buyer-form-wrapper__entity_active")):(o.classList="buyer-form__legal-entity",t.classList.remove("d-none"),e.classList.remove("buyer-form-wrapper__entity_active"))})}
if($(document).ready((function(){$(".owl-carousel").owlCarousel({loop:!0,margin:10,nav:!0,onChanged:function(e){3!==$(".owl-carousel").children().length&&6!==$(".owl-carousel").children().length&&$(".owl-carousel").append('<span class="slide-count white position-absolute"></span>');if(!e.namespace)return;let t=e.relatedTarget;$(".slide-count").text(t.relative(t.current())+1+"/"+t.items().length)},responsive:{0:{items:1},600:{items:1},1e3:{items:1}}})})),"/actions/actions.html"===window.location.pathname){let e=document.getElementById("slider"),t=[document.getElementsByClassName("price-range__value-low")[0],document.getElementsByClassName("price-range__value-up")[0]];noUiSlider.create(e,{start:[60,800],connect:!0,range:{min:0,max:1e3}}),e.noUiSlider.on("update",(function(e,n){t[n].innerHTML=Math.round(e[n])}))}if("/catalog/stillage-metalicheskoe/stillage-srednegruzovie/stillage-srednegruzovie.html"===window.location.pathname){let e=document.getElementById("sliderSrednoGruzovie"),t=[document.getElementsByClassName("price-range__value-low")[0],document.getElementsByClassName("price-range__value-up")[0]];noUiSlider.create(e,{start:[60,400],connect:!0,range:{min:0,max:1e3}}),e.noUiSlider.on("update",(function(e,n){t[n].innerHTML=Math.round(e[n])}))}$("#datetimepicker").flatpickr({dateFormat:"l, j F",time:"false",locale:"ru",disableMobile:"true"});